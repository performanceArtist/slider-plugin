!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/slider/",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&l(o,n.prototype),o}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,d=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,c(t).call(this,e))).type=r,n}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,a(Error)),n=t,(r=[{key:"getMessage",value:function(){return"".concat(this.message," (").concat(this.type,")")}},{key:"show",value:function(){console.log(this.getMessage())}}])&&o(n.prototype,r),s&&o(n,s),t}(),f=((u={value:0,min:0,max:100,step:1,interval:!1,showBubble:!0,showSteps:!1,horizontal:!0}).firstValue=u.min,u.secondValue=u.max,function(){return{state:Object.assign({},u),props:{selector:"",errors:[]},observers:[]}});var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=f();function r(e,t){var r=function(e,t){switch(e){case"value":case"firstValue":case"secondValue":case"max":case"min":case"step":return Number.isNaN(parseFloat(t))?new d("".concat(e," is not a number."),"notNum"):parseFloat(t);case"interval":case"showBubble":case"showSteps":case"horizontal":return"boolean"!=typeof t?new d("".concat(e," is not a boolean."),"notBool"):t;default:return new d("".concat(e," is not configurable"),"notConf")}}(e,t);if(r instanceof d)return r;switch(e){case"value":case"firstValue":case"secondValue":if(n.state.interval){if("firstValue"===e&&r>=n.state.secondValue)return n.state.firstValue;if("secondValue"===e&&r<=n.state.firstValue)return n.state.secondValue}return r>n.state.max?n.state.max:r<n.state.min?n.state.min:r=n.state.min+n.state.step*Math.round((r-n.state.min)/n.state.step);case"min":if(r>=n.state.max)return new d("Invalid min value: ".concat(r),"notMin");break;case"max":if(r<=n.state.min)return new d("Invalid max value: ".concat(r),"notMax");break;case"step":if(r<=0||(n.state.max-n.state.min)%r!=0||r>n.state.max-n.state.min)return new d("Invalid step value: ".concat(r),"notStep")}return r}function o(e){n.observers.forEach(function(t){try{switch(e){case"update":t.update();break;case"render":t.render();break;default:throw new Error("Invalid type argument")}}catch(e){console.error(e)}})}function i(e,t){var o=r(e,t);o instanceof d?(n.props.errors.push(o.getMessage()),o.show()):n.state[e]=o}n.props.selector=e;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e instanceof Object){var t,r,a,s=Object.keys(e).filter(function(e){return"value"!==e&&"firstValue"!==e&&"secondValue"!==e});if(s.forEach(function(t){i(t,e[t])}),void 0===e.interval?n.state.interval:e.interval){var l=e.firstValue||n.state.firstValue,c=e.secondValue||n.state.secondValue;i("firstValue",l),i("secondValue",c)}else i("value",e.value||n.state.value);0===s.length?o("update"):(t=function(){o("render")},r=200,function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=this;clearTimeout(a),a=setTimeout(function(){return t.apply(i,n)},r)})()}else console.log("Invalid object")};return a(t),{validate:r,getState:function(){return Object.assign(n.state,{})},setState:a,notify:o,props:n.props,addObserver:function(e){n.observers.push(e)}}};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(e);return Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),n}function v(e){this.model=e;var t=e.props.selector;if(this.root=document.querySelector(t),!this.root)throw new Error("Invalid selector (".concat(t,"): element not found."));e.addObserver(this)}function b(e){var t=e.handle,n=e.done,r=e.bubble,o=e.pos;e.horizontal?(t.style.left="".concat(o-2,"px"),n.style.width="".concat(o+5,"px"),r.style.left="".concat(o-6,"px")):(t.style.top="".concat(o-2,"px"),n.style.height="".concat(o+5,"px"),r.style.top="".concat(o-6,"px"))}v.prototype.init=function(e){this.controller=e,this.render()},v.prototype.render=function(){var e=this.model.getState(),t=e.horizontal,n=e.interval;if(void 0===this.controller)throw new Error("Controller was not initialized.");var r=function(e){var t=e.getState(),n=t.min,r=t.max,o=t.interval,i=t.showBubble,a=t.horizontal,s=t.showSteps,l=t.step,c=a?"slider_hor":"slider_ver",u=i?"display:absolute;":"display:none;",d={container:h("div",{class:"slider"}),input:h("input",{class:"slider__input",type:"text"}),slider:h("div",{class:"slider__slider ".concat(c)}),bubble:h("div",{class:"slider__bubble",style:u}),sliderDone:h("div",{class:"slider__done"}),sliderHandle:h("span",{class:"slider__head"}),errorCont:h("div",{class:"slider__error-container"})};if(d.container.appendChild(d.input),d.container.appendChild(d.slider),o&&(d.first=d.sliderHandle.cloneNode(),d.first.classList.add("slider__first-handle"),d.second=d.sliderHandle.cloneNode(),d.second.classList.add("slider__second-handle"),d.firstBubble=d.bubble.cloneNode(),d.secondBubble=d.bubble.cloneNode(),d.sliderNone=h("div",{class:"slider__none"}),delete d.sliderHandle),d.container.appendChild(d.errorCont),e.props.errors.map(function(e){var t=h("div",{class:"slider__error"});return t.innerHTML=e,t}).forEach(function(e){d.errorCont.appendChild(e)}),d.bubble.innerHTML=n,(o?[d.sliderNone,d.firstBubble,d.secondBubble,d.sliderDone,d.first,d.second]:[d.bubble,d.sliderDone,d.sliderHandle]).forEach(function(e){d.slider.appendChild(e)}),s)for(var f=0;f<=r-n;f+=l){var p=100*f/(r-n),v=h("label",{class:"slider__label",style:a?"left:".concat(p,"%"):"top:".concat(p,"%")});v.innerHTML=f+n,d.slider.appendChild(v)}return d}(this.model);r.slider.addEventListener("click",this.controller.handleClick),r.input.addEventListener("blur",this.controller.handleInput),n?(r.first.addEventListener("mousedown",this.controller.handleDrag),r.second.addEventListener("mousedown",this.controller.handleDrag)):r.sliderHandle.addEventListener("mousedown",this.controller.handleDrag),this.root.innerHTML="",this.model.props.errors=[],this.root.appendChild(r.container);var o=t?r.slider.offsetWidth:r.slider.offsetHeight;this.helpers={sliderLength:o},this.dom=r,this.update()},v.prototype.update=function(){if(this.model.getState().interval){var e=this.model.getState(),t=e.firstValue,n=e.secondValue,r=e.min,o=e.max,i=e.horizontal;b({handle:this.dom.first,done:this.dom.sliderNone,bubble:this.dom.firstBubble,pos:this.helpers.sliderLength*(t-r)/(o-r),horizontal:i}),b({handle:this.dom.second,done:this.dom.sliderDone,bubble:this.dom.secondBubble,pos:this.helpers.sliderLength*(n-r)/(o-r),horizontal:i}),this.dom.firstBubble.innerHTML=t,this.dom.secondBubble.innerHTML=n,this.dom.input.value=n-t}else{var a=this.model.getState(),s=a.value,l=a.min,c=a.max,u=a.horizontal;b({handle:this.dom.sliderHandle,done:this.dom.sliderDone,bubble:this.dom.bubble,horizontal:u,pos:this.helpers.sliderLength*(s-l)/(c-l)}),this.dom.bubble.innerHTML=s,this.dom.input.value=s}};var m=v;var y=function(e,t){this.model=e,this.view=t,this.handleClick=function(e){if(e.target.classList.contains("slider__slider")||"slider__done"===e.target.className||"slider__none"===e.target.className){var t=this.model.getState(),n=t.horizontal,r=t.max,o=t.min,i=t.interval,a=e.target.getBoundingClientRect(),s=(r-o)*(n?e.clientX-a.left:e.clientY-a.top)/this.view.helpers.sliderLength;if(i){var l=this.model.getState(),c=l.firstValue;s<c-o+(l.secondValue-c)/2?this.model.setState({firstValue:s+o}):this.model.setState({secondValue:s+o})}else this.model.setState({value:s+o})}}.bind(this),this.handleDrag=function(e){var t=this.model,n=this.view.helpers.sliderLength,r=t.getState(),o=r.horizontal,i=r.interval,a=r.max,s=r.min,l=e.target,c=l.offsetLeft,u=l.offsetTop,d=e.clientX,f=e.clientY;function p(e){var r=o?c+e.clientX-d:u+e.clientY-f,l=(a-s)*r/n;i?this.classList.contains("slider__first-handle")?t.setState({firstValue:l+s}):t.setState({secondValue:l+s}):t.setState({value:l+s})}l.addEventListener("mousemove",p),window.addEventListener("mouseup",function(){l.removeEventListener("mousemove",p)})}.bind(this),this.handleInput=function(e){var t=this.model.getState(),n=t.interval,r=t.firstValue,o=t.secondValue,i=t.max;if(n){var a=r+parseInt(e.target.value,10);a<i&&a>r?this.model.setState({secondValue:a}):this.model.setState({secondValue:o})}else this.model.setState({value:e.target.value})}.bind(this),t.init(this)};var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new p(e,t),r=new m(n);return new y(n,r),{setState:n.setState,getState:n.getState}};window.onload=function(){g("#example1",{interval:!0}),g("#example2",{value:20,step:20,showBubble:!1,showSteps:!0}),g("#example3",{value:10,min:40,horizontal:!1,interval:!0}),function(e,t){var n=document.getElementById(e);n&&n.addEventListener("change",function(e){e.preventDefault();var n={};Array.prototype.forEach.call(e.currentTarget.elements,function(e){if("submit"!==e.type){var t=e.name,r=e.value.trim();"radio"!==e.type&&"checkbox"!==e.type||(r=e.checked),""!==r&&(n[t]=r)}}),t.setState(n)})}("panel",g("#config-example",{interval:!0}))}}]);